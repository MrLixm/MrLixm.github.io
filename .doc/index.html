<!doctype html>
<!-- 🐸🐸𓆏🐸 who puts frogs in the html !!! 𓆏𓆏🐸 -->
<html lang="en" prefix="og: https://ogp.me/ns#">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>liam collod - Developer Documentation</title>
  <link rel="icon" href="https://liamcollod.xyz/.static/icons/logo-lixm.svg" type="image/x-ico">
  
  <meta name="description" content="The documentation that explains how this website is generated and modified.">
  <meta name="fediverse:creator" content="@liamcollod@mastodon.gamedev.place">
  <meta property="og:title" content="liam collod - Developer Documentation">
  <meta property="og:type" content="website"><meta property="og:url" content="https://liamcollod.xyz/.doc/index.html">
  <meta property="og:description" content="The documentation that explains how this website is generated and modified."><meta property="og:image" content="https://liamcollod.xyz/.static/images/cover-social.jpg">
  
  
  <link rel="stylesheet" href="../.static/styles/themes/default.css" />
  
  <link rel="stylesheet" href="../.static/fonts/Montserrat/Montserrat.css" />
  
  <link rel="stylesheet" href="../.static/fonts/SourceCodePro/SourceCodePro.css" />
  
  <link rel="stylesheet" href="../.static/fonts/SourceSansPro/SourceSansPro.css" />
  
  <link rel="stylesheet" href="../.static/styles/themes/pygments.onedark.css" />
  
  <link rel="stylesheet" href="../.static/styles/header.css" />
  
  <link rel="stylesheet" href="../.static/styles/footer.css" />
  
  <link rel="stylesheet" href="../.static/styles/base.css" />
  
  <link rel="stylesheet" href="../.static/styles/md.css" />
  
  <link rel="stylesheet" href="doc.css" />
  
  
  <link href="/pagefind/pagefind-ui.css" rel="stylesheet">
  <script src="/pagefind/pagefind-ui.js"></script>
</head>
<body>
<header>
  
    <div id="site-name">
      <img src="../.static/icons/logo-lixm-outlines.svg" alt="my diamond-shape logo; quite minimalisitic." width="32px" height="32px">
      <a href="../"><span>Liam Collod</span></a>
    </div>
    <nav class="main-nav" aria-label="Main menu">
      <ul>
        
        <li title="Work" class="">
          <a href="../work/">
            <!-- the duplicated span is a trick to change font-weight on hover -->
            <span>Work</span><span>Work</span>
          </a>
        </li>
        
        <li title="Blog" class="">
          <a href="../blog/">
            <!-- the duplicated span is a trick to change font-weight on hover -->
            <span>Blog</span><span>Blog</span>
          </a>
        </li>
        
        <li title="Resources" class="">
          <a href="../resources/">
            <!-- the duplicated span is a trick to change font-weight on hover -->
            <span>Resources</span><span>Resources</span>
          </a>
        </li>
        
        <li title="Contact" class="">
          <a href="../contact">
            <!-- the duplicated span is a trick to change font-weight on hover -->
            <span>Contact</span><span>Contact</span>
          </a>
        </li>
        
      </ul>
    </nav>
    <div id="search"></div>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            new PagefindUI({
            
                element: "#search",
            
                showSubResults: true,
            
                showImages: false,
            
            });
        });
    </script>
  
</header>
<main>
  <article class="read-area" data-pagefind-ignore>
    <h1>Developer Documentation</h1>
    <p>The documentation that explains how this website is generated and modified.</p>
    <div class="src-md">
<div class="nav-button">
<p><a href="test.html">previous page</a> </p>
<p><a href="test.html">next page</a></p>
</div>
<aside class="toc-wrapper sidebar"><nav class="toc"><p class="topic-title">Table Of Contents</p><div class="toc-list">
<ul>
<li><a href="#developer-documentation">Developer Documentation</a><ul>
<li><a href="#basics">Basics</a><ul>
<li><a href="#siteignore-files">.siteignore files</a></li>
<li><a href="#shelf-feature">shelf feature</a></li>
<li><a href="#build-process">build process</a></li>
</ul>
</li>
<li><a href="#creating-a-page">Creating a page</a><ul>
<li><a href="#writing-markdown-content">writing markdown content</a></li>
<li><a href="#page-metadata">page metadata</a></li>
<li><a href="#custom-markdown-syntax">custom markdown syntax</a><ul>
<li><a href="#code-blocks">code blocks</a></li>
<li><a href="#admonitions">admonitions</a></li>
<li><a href="#url-preview">url-preview</a></li>
<li><a href="#image-grid">image-grid</a></li>
<li><a href="#image-gallery">image-gallery</a><ul>
<li><a href="#image-frame">image-frame</a></li>
<li><a href="#image-meta-file">image .meta file</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#metajson-files">.meta.json files</a></li>
<li><a href="#writing-page-html-templates">Writing page html templates</a><ul>
<li><a href="#script-system">script system</a></li>
<li><a href="#cross-referencing">cross-referencing</a></li>
</ul>
</li>
<li><a href="#rss-feeds">Rss feeds</a></li>
<li><a href="#search-feature">Search feature</a></li>
<li><a href="#optimize-images">Optimize images</a></li>
</ul>
</li>
</ul>
</div>
</nav></aside><p>This website is built using <code class="inline">lxmsite</code>, a custom made Python library that allow
to convert a bunch of files to a <em>static website</em>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>A <em>static website</em> have all its content structure generated before being
published online. Every page correspond to a single html file on the server.</p>
</div>
<p><code class="inline">lxmsite</code> will generate a website that is made only of HTML and CSS. The
"source files" are a mix of Markdown, HTML Jinja templates and
other custom file formats.</p>
<p>You don't need to actually know Python to use <code class="inline">lxmsite</code> (unless you want to
extend its feature).</p>
<h2 id="basics"><a href="#basics">Basics</a></h2>
<p>The central concept for this website is that the source file structure represents
the published site structure. It tries to be as explicit as possible.</p>
<div class="highlight"><pre><span></span><code>source/                        &gt;  published/
    index.md                   &gt;      index.html
    index.css                  &gt;      index.css
    blog/                      &gt;      blog/
        article1.md            &gt;          article1.html
        article1-image.jpg     &gt;          article1-image.jpg
</code></pre></div>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>All paths/urls are assumed to NOT have whitespaces. Adding whitespaces
may lead to unexpected consequences during build.</p>
</div>
<p>So let's say your website is published at <code class="inline">https://site.com</code>:</p>
<ul>
<li>then <code class="inline">https://site.com/blog/index.html</code> implies there must be a
  <code class="inline">/blog/index.md</code> file.</li>
<li>Same for <code class="inline">https://site.com/images/art.jpg</code> which
  implies <code class="inline">images/art.jpg</code> must exist in the source file structure.</li>
</ul>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>It is possible to exclude some file in the source hierarchy to be collected.
This is achieved using the custom <code class="inline">.siteignore</code> mechanism.</p>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>A common convention for the web is that <code class="inline">site.com/blog</code> will redirect
to <code class="inline">site.com/blog/index.html</code> which is why you will usually
create an <code class="inline">index.md</code> file in every directory.</p>
<p>(this convention depends on the web server serving your files).</p>
</div>
<p>When you have a basic file structure created, you may want to build the site. <code class="inline">lxmsite</code>
comes with a build function but it is more convenient to use the
<a href="https://github.com/MrLixm/MrLixm.github.io/blob/main/scripts/build-site.py">build script</a>
(a CLI).</p>
<p>That build script only require on input: a path to the <em>site config file</em>.</p>
<p>The <em>site config file</em> is a python file that include a bunch of global variables that
describe how the site must be built. This include what is the source directory
(<code class="inline">SRC_ROOT</code>) or which directory you want to build it to (<code class="inline">DST_ROOT</code>).</p>
<h3 id="siteignore-files"><a href="#siteignore-files">.siteignore files</a></h3>
<p>A .siteignore is a file that indicate which path must not be collected to build
the site. It can be found at root but also in any sub-directory.</p>
<p>The file format works as follows:</p>
<ul>
<li>each line defines a "path expression" which resolves to multiple paths to ignore.</li>
<li>a line can be empty</li>
<li><em>path expression</em> follow the python <a href="https://docs.python.org/3/library/glob.html">glob</a> syntax</li>
<li><em>path expression</em> MUST be relative to the .siteignore file directory</li>
<li><em>path expression</em> may resolve to non-existing paths</li>
</ul>
<div class="admonition admonition">
<p class="admonition-title">Admonition</p>
<p>.siteignore files are cumulative, this means that their paths are made absolute
then grouped together and its this list which is used to ignore paths.</p>
</div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>.siteignore
  **/.*.html
  *.txt
index.html
somestuff.txt
blog/
  .siteignore
     **/*.cpp
  index.html
  .template.html
  snippet.cpp
  resource.txt
</code></pre></div>
<p>In the above we have an expression at root that will ignore all html files
that starts with a dot, the <code class="inline">**</code> is a glob pattern which express recursion,
meaning that <code class="inline">blog/.template.html</code> will be ignored. We will also ignore
<code class="inline">somestuff.txt</code> but NOT <code class="inline">resource.txt</code>. We then ignore <code class="inline">blog/snippet.cpp</code>.</p>
<h3 id="shelf-feature"><a href="#shelf-feature">shelf feature</a></h3>
<p>A shelf indicate a directory contains a bunch of page you want to "group" together.
For example: a portfolio, a blog, a news-feed.</p>
<p>You create a shelf by simpy adding a <code class="inline">.shelf</code> file to the root directory.</p>
<p>Currently the shelf can be used in 2 ways:</p>
<ol>
<li>
<p>It allow to iterate through its children page from a Jinja template.
    You can retrieve a <code class="inline">ShelfResource</code> instance using the <code class="inline">Shelf</code> variable
    in your Jinja template context. The object proivides different method to browse
    its page, on which you can loop using Jinja <code class="inline">{% for %}</code> clause.</p>
</li>
<li>
<p>It allow to auto-create an rss feed from all the children pages.
    <a href="https://en.wikipedia.org/wiki/RSS">RSS</a> is the most naive way to allow visitor
    to "suscribe" to a website and get notified for updates. Here, adding a new page
    will add a new item to the RSS feed, which will notify suscribers a new page
    has been published.</p>
</li>
</ol>
<p>The <code class="inline">.shelf</code> file acts as a config and have a few options to change the shelf behavior.
Its content is a custom syntax which follow the given rules:</p>
<ul>
<li>each lines define an option to configure</li>
<li>an option CANNOT span multiple lines</li>
<li>a line might be empty</li>
<li>
<p>an option is specified as <code class="inline">key: value</code> with optional whitespace around the <code class="inline">:</code>.</p>
</li>
<li>
<p><em>key</em> must be one of the available pre-defined option keys.</p>
</li>
<li><em>value</em> must be a valid python object (so a string must be quoted for example).</li>
</ul>
<p>And the following option keys are supported:</p>
<div class="table-wrapper"><table class="inline">
<thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="inline">ignored_pages</code></td>
<td>list[str]</td>
<td>List of relative page url to not include in browse methods (relative to the shelf file).</td>
</tr>
<tr>
<td><code class="inline">disable_rss</code></td>
<td>bool</td>
<td>True to disable the auto-generation of an rss feed.</td>
</tr>
</tbody>
</table>
</div><h3 id="build-process"><a href="#build-process">build process</a></h3>
<p>This is how the source file structure is parsed the site final file structure:</p>
<ul>
<li>collect all file paths in the source directory and ignore some paths using the .siteignore files.</li>
<li>read and convert markdown file as pages</li>
<li>collect shelves</li>
<li>render pages with their template and write to disk</li>
<li>build redirection pages</li>
<li>build shelves rss feed</li>
<li>copy static resources</li>
</ul>
<p>See <code class="inline">lxmsite._build</code> for the code implementation.</p>
<h2 id="creating-a-page"><a href="#creating-a-page">Creating a page</a></h2>
<p>All pages MUST have a .md file, even if it just has a title. You are then
free to define its content using the standard markdown syntax or to manually
create the html with a template.</p>
<h3 id="writing-markdown-content"><a href="#writing-markdown-content">writing markdown content</a></h3>
<p>The official markdown synatx is supported: <a href="https://daringfireball.net/projects/markdown/syntax.">https://daringfireball.net/projects/markdown/syntax.</a></p>
<h3 id="page-metadata"><a href="#page-metadata">page metadata</a></h3>
<p>Those are the fields that are understood as page metadata:</p>
<div class="table-wrapper"><table class="inline">
<thead>
<tr>
<th>name</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="inline">authors</code></td>
<td>Comma separated list of person who authored the page. See <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta/name">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta/name</a></td>
</tr>
<tr>
<td><code class="inline">tags</code></td>
<td>Comma separated list of arbitrary labels matching the page topics</td>
</tr>
<tr>
<td><code class="inline">language</code></td>
<td>Language of the page. As standardized by <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/lang">https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/lang</a> and <a href="https://www.w3.org/International/articles/language-tags/">https://www.w3.org/International/articles/language-tags/</a></td>
</tr>
<tr>
<td><code class="inline">title</code></td>
<td>Additional override if the md file title is not desired. See <a href="https://ogp.me/#metadata">https://ogp.me/#metadata</a></td>
</tr>
<tr>
<td><code class="inline">type</code></td>
<td>Caracterize the kind of content of the page. As standardized by <a href="https://ogp.me/#types">https://ogp.me/#types</a></td>
</tr>
<tr>
<td><code class="inline">image</code></td>
<td>Relative file path to the image to use as cover for the page. See <a href="https://ogp.me/#metadata">https://ogp.me/#metadata</a></td>
</tr>
<tr>
<td><code class="inline">image-alt</code></td>
<td>Alt text to describe the content of the <code class="inline">image</code> field.</td>
</tr>
<tr>
<td><code class="inline">description</code></td>
<td>Short, human-readable summary of the page content. See <a href="https://ogp.me/#optional">https://ogp.me/#optional</a></td>
</tr>
<tr>
<td><code class="inline">date-created</code></td>
<td>Date at which the page was created. Format is <code class="inline">YYYY-MM-DDThh:mm</code>. See <a href="https://en.wikipedia.org/wiki/ISO_8601">https://en.wikipedia.org/wiki/ISO_8601</a></td>
</tr>
<tr>
<td><code class="inline">date-modified</code></td>
<td>Date at which the page was last modified. Format is <code class="inline">YYYY-MM-DDThh:mm</code>. See <a href="https://en.wikipedia.org/wiki/ISO_8601">https://en.wikipedia.org/wiki/ISO_8601</a></td>
</tr>
<tr>
<td><code class="inline">template</code></td>
<td>Relative file path to the html template to use for rendering the page.</td>
</tr>
<tr>
<td><code class="inline">stylesheets</code></td>
<td>Comma separated list of stylesheet path relative to the page. Prefix with a + to inherit the parent stylesheets.</td>
</tr>
<tr>
<td><code class="inline">status</code></td>
<td>either <code class="inline">published</code> (no effect) or <code class="inline">unlisted</code> (will be excluded from being listed in its parent shelf)</td>
</tr>
</tbody>
</table>
</div><div class="admonition important">
<p class="admonition-title">Important</p>
<p>None of the field are when read by the code mandatory but:</p>
<ul>
<li><code class="inline">date_created</code> is required when using Shelf and parsing children pages by last created.</li>
<li><code class="inline">template</code> is required when building the page to html</li>
</ul>
</div>
<p>Some extra fields may be used depending on the context (whose existence is
only defined in some html template):</p>
<p><strong>blog context:</strong></p>
<div class="table-wrapper"><table class="inline">
<thead>
<tr>
<th>name</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="inline">category</code></td>
<td>(optional) which type of content is the page</td>
</tr>
<tr>
<td><code class="inline">cover</code></td>
<td>(optional) path to an image to display on top of the blog post.</td>
</tr>
<tr>
<td><code class="inline">cover-alt</code></td>
<td>(optional) the alt text for the cover image.</td>
</tr>
</tbody>
</table>
</div><p><strong>resources context:</strong></p>
<div class="table-wrapper"><table class="inline">
<thead>
<tr>
<th>name</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="inline">category</code></td>
<td>(optional) which type of content is the page</td>
</tr>
</tbody>
</table>
</div><p>A field is specified under the page title as <code class="inline">:field-name: value</code>. Example:</p>
<div class="highlight"><pre><span></span><code><span class="gh"># my page</span>

:description: this is quite a long summary that would be
  cool to wrap on 2 lines.
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>All file paths must be relative to the parent directory of the md file.</li>
<li>All file paths use posix-like forward slashes, like <code class="inline">my/path/to/file</code>.</li>
<li>All file paths refer to the built site, not files in the source directory.</li>
</ul>
</div>
<p>See <code class="inline">lxmsite._page</code> for the code implementation.</p>
<h3 id="custom-markdown-syntax"><a href="#custom-markdown-syntax">custom markdown syntax</a></h3>
<p>In extent to the builtin markdown syntax we provide additional features.</p>
<p>Some of those feature are implemented as "directives" which is the same concept copied
from the RestructuredText language.</p>
<p>A directive is structured as:</p>
<div class="highlight"><pre><span></span><code><span class="p">..</span> <span class="ow">directivename</span><span class="p">::</span> argument1 argument2
    <span class="nc">:option1:</span>
    <span class="nc">:option2:</span>

    content
</code></pre></div>
<h4 id="code-blocks"><a href="#code-blocks">code blocks</a></h4>
<p>You can embed code snippets with the <a href="https://facelessuser.github.io/pymdown-extensions/extensions/superfences/">superfence syntax</a>. </p>
<p>It uses <a href="https://pygments.org/">pygments</a> to provide syntax highlighting.</p>
<ul>
<li>The list of supported languages: <a href="https://pygments.org/languages/">https://pygments.org/languages/</a></li>
</ul>
<h4 id="admonitions"><a href="#admonitions">admonitions</a></h4>
<p>Admonitions are "extras" from the Markdown python library: <a href="https://python-markdown.github.io/extensions/admonition/.">https://python-markdown.github.io/extensions/admonition/.</a></p>
<p>We have implemented styling for the following classes:</p>
<div class="highlight"><pre><span></span><code>admonition, attention, caution, danger, error, hint, important, note, tip, warning
</code></pre></div>
<p>To render a specific admonition type with a custom title:</p>
<div class="highlight"><pre><span></span><code>!!! warning &quot;🍕 About pizza&quot;
    Pineapple do belongs on them.
</code></pre></div>
<p>Will render:</p>
<div class="admonition warning">
<p class="admonition-title">🍕 About pizza</p>
<p>Pineapple do belongs on them.</p>
</div>
<h4 id="url-preview"><a href="#url-preview">url-preview</a></h4>
<p>This is a custom directive which allow you to share links as "static embeds", meaning they have the box with rich
content that is prettier than just a link, but you actually have to write all the rich content yourself instead of
having fetch using javascript.</p>
<p>It required one mandatory argument which is the url to "prettify".</p>
<p>The directive have 4 options:</p>
<ul>
<li><code class="inline">title</code>: title to use for the preview</li>
<li><code class="inline">image</code>: url to an image file (relative or absolute).</li>
<li><code class="inline">svg</code>: relative url to a local svg file (relative to the page directory).</li>
<li><code class="inline">color</code>: the css color of the svg.</li>
<li><code class="inline">svg-size</code>: 1 or 2 number indicating the size of the svg. ex: '64' will set the svg to 64x64 px</li>
</ul>
<p>The content of the directive will be used as description.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="p">..</span> <span class="ow">url-preview</span><span class="p">::</span> https://liamcollod.xyz
    <span class="nc">:title:</span> Website - Liam Collod
    <span class="nc">:image:</span> ../.static/images/cover-social.jpg

    Check my website &amp; blog. VFX, imaging and software development.
</code></pre></div>
<p>will render:</p>
<div class="url-preview-box"><a class="reference" href="https://liamcollod.xyz"></a><div class="url-preview-image"><img alt="" src="../.static/images/cover-social.jpg" /></div>
<div class="url-preview-details">
<div class="url-preview-title">
<p>Website - Liam Collod</p>
</div>
<div class="url-preview-subtitle"><a href="https://liamcollod.xyz">https://liamcollod.xyz</a></div>
<div class="url-preview-description">
<p>Check my website &amp; blog. VFX, imaging and software development.</p>
</div>
</div>
</div>
<h4 id="image-grid"><a href="#image-grid">image-grid</a></h4>
<p>When needing to display a lot of image in a non-sequential layout (so as a grid), you
can use the <code class="inline">.. image-grid::</code> directive.</p>
<p>It accepts no argument, neither options and all works based on its content.</p>
<p>Each line of the content is treated as an image. You group images into one row
by separating them by a blank line. The line must start by the image uri, relative
to the page its in and is optionally followed by the image caption.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The image path cannot contain whitespaces</p>
</div>
<p>It is possible the image caption span multiple lines; in that case the following lines
must start with a 2+ spaced indent.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="p">..</span> <span class="ow">image-grid</span><span class="p">::</span>

    path/to/image1.jpg
    path/to/image2.jpg

    path/to/image3.jpg some caption that will be displayed under
    path/to/image4.jpg the caption can span
        multiple lines if it&#39;s too long.
    path/to/image5.jpg
</code></pre></div>
<h4 id="image-gallery"><a href="#image-gallery">image-gallery</a></h4>
<p>The <code class="inline">.. image-gallery::</code> is a more advanced directive to showcase images,
their metqdata and their caption.</p>
<p>It's build upon a 2-column layout in which you choose to add images or their caption
independently.</p>
<p>The directive have no arguments and expect 4 mandatory options:</p>
<ul>
<li><code class="inline">:left:</code> comma separated list of items id to add to the left column (in order).</li>
<li><code class="inline">:right:</code> comma separated list of items id to add to the right column (in order).</li>
<li><code class="inline">:left-width:</code> a single float, the width in percent of the left column</li>
<li><code class="inline">:right-width:</code> a single float, the width in percent of the right column</li>
</ul>
<p>You can specify one optional option:</p>
<ul>
<li>
<p><code class="inline">:template:</code> a path relative to the file that correspond to an html Jinja template to render.
    <em>(Note that the template root become the parent directory of the template)</em></p>
<ul>
<li>
<p>The template have access to a single <code class="inline">Columns</code> variable. The variable is a dict
    with the following structure:</p>
<div class="highlight"><pre><span></span><code><span class="n">Columns</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;left&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                <span class="s2">&quot;uri&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
                <span class="s2">&quot;caption&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                <span class="s2">&quot;classes&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="o">...</span>
        <span class="p">]</span>
    <span class="p">},</span> 
    <span class="s2">&quot;right&quot;</span><span class="p">:</span> <span class="p">{</span><span class="o">...</span><span class="p">},</span> 
    <span class="s2">&quot;responsive&quot;</span><span class="p">:</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</li>
</ul>
</li>
</ul>
<p>The content will allow to specify which image to display and configure their caption
and metadata. This is achieved by using another directive <code class="inline">.. image-frame::</code>.</p>
<p>You add as much <code class="inline">image-frame</code> directive as there is image to showcase.</p>
<h5 id="image-frame"><a href="#image-frame">image-frame</a></h5>
<p>This directive allow to declare an image, its identifier, and its metadata. It have
2 "modes" to specify the metadata: inline in the md file or retrieved from a meta file.
The 2 modes can be used together where the inline metadata will override any metadata
specified in the file.</p>
<p>It expects 3 mandatory arguments, 1 optional option and optional content.</p>
<p>The 3 arguments are in order: "image id", "label id", "image uri / meta file path"</p>
<p>The 1 options is <code class="inline">:metadata:</code> which expect to define a mapping of "metadata name": "value",
formalized as a list of line where each line is a pair.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Each pair will correspond to a list item that will receive the metadata name as
css-class which allow indifidual styling based on the metadata.</p>
</div>
<p>The content will be the image caption (its "label").</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="p">..</span> <span class="ow">image-gallery</span><span class="p">::</span>
    <span class="nc">:left:</span> image1
    <span class="nc">:right:</span> label1, image2, label2
    <span class="nc">:left-width:</span> 35
    <span class="nc">:right-width:</span> 65

<span class="p">    ..</span> <span class="ow">image-frame</span><span class="p">::</span> image1 label1 photo1.jpg
        <span class="nc">:metadata:</span>
            date: 2024-11 early morning
            location: France - Lyon - Parc de la Tete d’Or
            film: 35mm Kodak Gold 200
            lens: Minolta MD 35mm

        some of the text descrption of the image
        that can span multiple lines

<span class="p">    ..</span> <span class="ow">image-frame</span><span class="p">::</span> image2 label2 photo2.jpg.meta
        <span class="nc">:metadata:</span>
            author: Liam

        -- {caption} -- (shot on {camera})
</code></pre></div>
<p>In the above example, we define the first image inline, while the second image
relies on a meta file. However for that second image we add an extra metadata key
"author" and we slightly improve the meta file caption thanks to tokens <code class="inline">{meta name}</code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Any metadata key defined in the meta file can be used in the directive content.</p>
</div>
<h5 id="image-meta-file"><a href="#image-meta-file">image .meta file</a></h5>
<p>A meta file allow to specify an image metadata as key: value pair with a quite
human-friendly syntax (close to yaml but not yaml).</p>
<p>The meta file name MUST the full image filename it characterizes (including the file 
format suffix) + the <code class="inline">.meta</code> suffix. Example:</p>
<div class="highlight"><pre><span></span><code>photo-cat.png &gt; photo-cat.png.meta
</code></pre></div>
<p>For its content, each line represent a metadata to set. The syntax is <code class="inline">metadata name: value</code>.
It's possible the value span multiple lines if you indent the following lines with at
least 2 spaces. Example:</p>
<div class="highlight"><pre><span></span><code>camera: Lumix S5IIX
description: here is some text that
    will be spanning multiple lines
date: Monday
</code></pre></div>
<p>The metadata names can be whatever you want except for <code class="inline">caption</code> that must correspond
to the caption used to label the image.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not put empty lines between metadatas as they will be treated as part of the value
of the last metadata defined. However you can add an empty line at the end of the
document and it will be ignored.</p>
</div>
<h2 id="metajson-files"><a href="#metajson-files">.meta.json files</a></h2>
<p>We see previously that each markdown page can define some metadata at its top. However,
specifying everytime some of those fields is a repetitive task. To adress this issue
you can use meta files.</p>
<p>Meta files are json files whose content specify default metadata value to use for all
files that are next or children in the hierarchy of the meta file. The meta file hierachy
is recursively merged so the meta file "closest" to your page will get priority.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>.meta.json
index.md
blog/
    .meta.json
    index.md
    post1.md
    post2.md
</code></pre></div>
<blockquote>
<p>In the above example <code class="inline">.meta.json</code> at root will affect <code class="inline">index.md</code> but also all
files in the <code class="inline">blog/</code> directory. However the content of <code class="inline">blog/.meta.json</code> will take
priority over the root one.</p>
</blockquote>
<p>Meta file use standard JSON syntax, where a non-nested dict is expected. Each root key
defines the name of the metadata to set, which is the same as you would use in the markdown
page. The value can either be a string or list of string.</p>
<p>List of strings are handled differently but allow merging, this mean that the child
meta file will <code class="inline">extend()</code> the parent meta file list if it exists. When resolved
in the md file, lists are converted back to string by joining its items with a <code class="inline">,</code>.</p>
<p>It's also totally possibel that for the same metadata key, switch between a list type
or a str type. A str type will override any list value defined before, and a list value
when the previous value was a string, will cast the previous value to a list automatically.</p>
<p><em>The code logic can be found in <code class="inline">lmxsite._browse</code>.</em></p>
<h2 id="writing-page-html-templates"><a href="#writing-page-html-templates">Writing page html templates</a></h2>
<p>All html templates are processed with <a href="https://jinja.palletsprojects.com/en/stable/">Jinja</a>.
Refers to their documentation for how to write Jinja templates.</p>
<p>In addition to the standard Jinja syntax, the following objects are available (some
explained in details after):</p>
<p><strong>filters:</strong></p>
<ul>
<li><code class="inline">slugify</code>: make the string url-compatible</li>
<li><code class="inline">mksiteabs</code>: Convert the given site-relative url to absolute.</li>
<li><code class="inline">mksiterel</code>: make an internal link relative to the site root</li>
<li><code class="inline">mkpagerel</code>: make an internal link relative to the current page</li>
<li><code class="inline">prettylink</code>: remove the ".html" or "index.html" of internal links</li>
</ul>
<p><strong>variables:</strong></p>
<ul>
<li><code class="inline">Page</code>: the page instance being rendered.</li>
<li><code class="inline">Config</code>: the global site config used.</li>
<li><code class="inline">Context</code>: additional variables specific to this build.</li>
<li><code class="inline">Shelf</code>: optional parent shelf the page belongs to (can be None).</li>
<li><code class="inline">ShelfLibrary</code>: collection of all shelves the site has.</li>
<li><code class="inline">include_script_output</code>: function to include the output of a python script.</li>
</ul>
<h3 id="script-system"><a href="#script-system">script system</a></h3>
<p>The jinja syntax is not enough and you wish some part of the template was procedurally
generated ? You can use the script include system to run an arbitrary python script
that generates html (or actually anything).</p>
<p>To create a script, create a standard python file next to the template (can actually
be stored anywhere but you need to specify its path relative to the template it is used
in). Inside, you only need to declare one mandatory function:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="n">template_renderer</span><span class="p">:</span> <span class="n">lxmsite</span><span class="o">.</span><span class="n">TemplateRenderer</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="c1"># your implementation here</span>
    <span class="k">pass</span>
</code></pre></div>
<p>The function when executed will return the text that need to be included in the template.
The only argument <code class="inline">template_renderer</code> is a copy of the instance that is responsible
for rendering the template that the script was called from. It allows in theory to
recursively render another jinja template from the script or use its attributes for
whatever you might need.</p>
<p>To use a script inside a template you use the <code class="inline">include_script_output</code> variable that is
actually a function to call with the script path (relative to the template):</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
    {{ include_script_output(&quot;script_name.py&quot;) }}
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
<h3 id="cross-referencing"><a href="#cross-referencing">cross-referencing</a></h3>
<p>How to link to other html pages or static content ?</p>
<p>First, reminder that all relative urls are relative to the page they are on.
This mean that if you want to link to a resources based on its site root location,
like <code class="inline">.static/icon/icon.svg</code> you will need to make it relative to the page
instead. This is easily done using the custom jinja filter <code class="inline">mkpagerel</code>.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="s2">&quot;.static/icons/icon.svg&quot;</span><span class="o">|</span><span class="nf">mkpagerel</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span>
</code></pre></div>
<p>If you need the opposite you can also use <code class="inline">mksiterel</code> to make a page-relative
url; relative to the site root instead.</p>
<p>And if you ever need an absolute url you can use <code class="inline">mksiteabs</code> that will prepend
the site url but only on publish.</p>
<p>Then when linking pages or content, you must link a file, never a directory.
While once published <code class="inline">work/myproject/</code> might resolve fine by the server,
locally it will not, and you will need to link <code class="inline">work/myproject/index.html</code>
instead. However just because this make links uglier you can use <code class="inline">prettylink</code>
that will shorten the links on publish; best of both worlds !</p>
<h2 id="rss-feeds"><a href="#rss-feeds">Rss feeds</a></h2>
<p>When creating a shelf, a rss feed will automatically be generated from that shelf as
long as a template is specified in the site-config using <code class="inline">RSS_FEED_TEMPLATE</code>.</p>
<p>The template is a regular jinja2 file that have access to the same <strong>filters</strong> as the
page templates, but different <strong>variables</strong> which are:</p>
<ul>
<li><code class="inline">URL_PATH</code>: the url path of the feed file; relative to the site root</li>
<li><code class="inline">Config</code>: the global site config used.</li>
<li><code class="inline">Shelf</code>: the shelf object to generate the feed from</li>
</ul>
<p>The generated feed can be accessed at <code class="inline">{shelf url}/{shelf name}.rss.xml</code>.</p>
<h2 id="search-feature"><a href="#search-feature">Search feature</a></h2>
<p>Implemented through <a href="https://pagefind.app/">https://pagefind.app/</a></p>
<h2 id="optimize-images"><a href="#optimize-images">Optimize images</a></h2>
<p>You can have image automatically optimized at build time by using opti files:</p>
<ul>
<li>
<p>the file must be named exactly as the image it optimizes with the additional <code class="inline">.opti</code> suffix.</p>
</li>
<li>
<p>example: <code class="inline">/src/img.png</code> &gt; <code class="inline">/src/img.png.opti</code></p>
</li>
<li>
<p>the file content follow the JSON file format syntax</p>
</li>
<li>
<p>JSON content is a shallow tree of pre-defined keys that are defined below. All keys are optional.</p>
</li>
</ul>
<div class="table-wrapper"><table class="inline">
<thead>
<tr>
<th>name</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="inline">convert_mode</code></td>
<td>Optional Pillow conversion mode to conver to. Usually "RGB" to convert RGBA pngs.</td>
</tr>
<tr>
<td><code class="inline">target_format</code></td>
<td>name of a format supported by Pillow to write the optimized file as.</td>
</tr>
<tr>
<td><code class="inline">target_file_suffix</code></td>
<td>suffix for the optimized file written to disk.</td>
</tr>
<tr>
<td><code class="inline">format_kwargs</code></td>
<td>Pillow compatible kwargs for the given <code class="inline">target_format</code>.</td>
</tr>
<tr>
<td><code class="inline">max_dimensions</code></td>
<td>Optional maximum pixel dimensions the image must not be larger than while.</td>
</tr>
</tbody>
</table>
</div>
</div>
  </article>

</main>
<footer>
  
    
    <p>Static website <a href="."><i>hand-crafted</i></a> using 🐍 Python !
      Last built on <i>2025-09-04T00:43</i> from commit <i><a href="https://github.com/MrLixm/MrLixm.github.io/commit/d48354c" target="_blank">d48354c</a></i></p>
    <p>By using this website you agree black/trans/everyone's lives matter 🏳️‍🌈. Otherwise, fuck off.</p>
  
</footer>
</body>
</html>